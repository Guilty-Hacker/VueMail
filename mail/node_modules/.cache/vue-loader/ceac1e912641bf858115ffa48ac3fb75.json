{"remainingRequest":"E:\\vue-cli_study\\VueMail\\mail\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\vue-cli_study\\VueMail\\mail\\src\\views\\detail\\Detail.vue?vue&type=style&index=0&id=117d0e76&scoped=true&lang=css&","dependencies":[{"path":"E:\\vue-cli_study\\VueMail\\mail\\src\\views\\detail\\Detail.vue","mtime":1600328497686},{"path":"E:\\vue-cli_study\\VueMail\\mail\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue-cli_study\\VueMail\\mail\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\vue-cli_study\\VueMail\\mail\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\vue-cli_study\\VueMail\\mail\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue-cli_study\\VueMail\\mail\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKI2RldGFpbCB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIHotaW5kZXg6IDk7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKICBoZWlnaHQ6IDEwMHZoOwp9CgouZGV0YWlsLW5hdiB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIHotaW5kZXg6IDk7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKfQoKLmNvbnRlbnQgewogIGhlaWdodDogY2FsYygxMDAlIC0gNDRweCk7Cn0K"},{"version":3,"sources":["Detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuIA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Detail.vue","sourceRoot":"src/views/detail","sourcesContent":["<template>\n  <div id=\"detail\">\n    <detail-nav-bar class=\"detail-nav\" @titleClick=\"titleClick\" ref=\"nav\"/>\n    <scroll class=\"content\" ref=\"scroll\" :probe-type=\"3\" @scroll=\"contentScroll\">\n      <detail-swiper :top-images=\"topImages\"/>\n      <detail-base-info :goods=\"goods\"/>\n      <detail-shop-info :shop=\"shop\"/>\n      <detail-goods-info :detail-info=\"detailInfo\" @imageLoad=\"imageLoad\"/>\n      <detail-param-info ref=\"params\" :param-info=\"paramInfo\"/>\n      <detail-comment-info ref=\"comment\" :comment-info=\"commentInfo\"> </detail-comment-info>\n      <goods-list ref=\"recommend\" :goods=\"recommends\"> </goods-list>\n    </scroll>\n    <detail-bottom-bar @addCart=\"addToCart\"> </detail-bottom-bar>\n  </div>\n</template>\n\n<script>\n  import DetailNavBar from './childComps/DetailNavBar'\n  import DetailSwiper from './childComps/DetailSwiper'\n  import DetailBaseInfo from './childComps/DetailBaseInfo'\n  import DetailShopInfo from './childComps/DetailShopInfo'\n  import DetailGoodsInfo from './childComps/DetailGoodsInfo'\n  import DetailParamInfo from './childComps/DetailParamInfo'\n  import DetailCommentInfo from \"./childComps/DetailCommentInfo\";\n  import GoodsList from \"@/components/content/goods/GoodsList\";\n  import DetailBottomBar from \"./childComps/DetailBottomBar\";\n  import Scroll from '@/components/common/scroll/Scroll'\n\n  import {getDetail, Goods, Shop, GoodsParam, getRecommend} from \"../../network/detail\";\n\n  export default {\n    name: \"Detail\",\n    components: {\n      DetailNavBar,\n      DetailSwiper,\n      DetailBaseInfo,\n      DetailShopInfo,\n      DetailGoodsInfo,\n      DetailParamInfo,\n      Scroll,\n      DetailBottomBar,\n      GoodsList,\n      DetailCommentInfo\n    },\n    data() {\n      return {\n        iid: null,\n        topImages: [],\n        goods: {},\n        shop: {},\n        detailInfo: {},\n        paramInfo: {},\n        commentInfo:{},\n        recommends:[],\n        themeTopYs:[],\n        currentIndex: 0,\n\n      }\n    },\n    created() {\n      // 1.保存传入的iid\n      this.iid = this.$route.params.iid\n\n      // 2.根据iid请求详情数据\n      getDetail(this.iid).then(res => {\n        // 1.获取顶部的图片轮播数据\n        const data = res.result;\n        this.topImages = data.itemInfo.topImages\n\n        // 2.获取商品信息\n        this.goods = new Goods(data.itemInfo, data.columns, data.shopInfo.services)\n\n        // 3.创建店铺信息的对象\n        this.shop = new Shop(data.shopInfo)\n\n        // 4.保存商品的详情数据\n        this.detailInfo = data.detailInfo;\n\n        // 5.获取参数的信息\n        this.paramInfo = new GoodsParam(data.itemParams.info, data.itemParams.rule)\n\n        // 取出评论信息\n        if (data.rate.cRate !== 0){\n          this.commentInfo = data.rate.list[0]\n        }\n      })\n\n      //3.请求推荐数据\n      getRecommend().then(res => {\n        this.recommends = res.data.list\n      })\n    },\n    methods: {\n      imageLoad() {\n        this.$refs.scroll.refresh()\n        this.themeTopYs = []\n        this.themeTopYs.push(0)\n        this.themeTopYs.push(this.$refs.params.$el.offsetTop)\n        this.themeTopYs.push(this.$refs.comment.$el.offsetTop)\n        this.themeTopYs.push(this.$refs.recommend.$el.offsetTop)\n        console.log(this.themeTopYs);\n      },\n      titleClick(index){\n        // console.log(index);\n        this.$refs.scroll.scrollTo(0, -this.themeTopYs[index])\n      },\n      contentScroll(position){\n        const positionY = -position.y\n        // console.log(postion);\n        let length = this.themeTopYs.length\n        for(let i=0; i<length;i++){\n        if (this.currentIndex !== i &&((i < length - 1 && positionY >= this.themeTopYs[i] && positionY <\n            this.themeTopYs[i+1]) || (i===length-1 && positionY >= this.themeTopYs[i]))){\n            this.currentIndex = i;\n            this.$refs.nav.currentIndex = this.currentIndex\n          }\n        }\n      },\n      addToCart(){\n        //1.获取商品信息\n        const product = {}\n        product.image = this.topImages[0]\n        product.title = this.goods.title\n        product.desc = this.goods.desc\n        product.price = this.goods.realPrice\n        product.iid = this.iid\n        //2.将商品添加到购物车\n        // this.$store.commit('addCart', product)\n        this.$store.dispatch('addCart',product)\n      },\n    }\n  }\n</script>\n\n<style scoped>\n  #detail {\n    position: relative;\n    z-index: 9;\n    background-color: #fff;\n    height: 100vh;\n  }\n\n  .detail-nav {\n    position: relative;\n    z-index: 9;\n    background-color: #fff;\n  }\n\n  .content {\n    height: calc(100% - 44px);\n  }\n</style>\n"]}]}