{"remainingRequest":"E:\\vue-cli_study\\VueMail\\mail\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\vue-cli_study\\VueMail\\mail\\src\\views\\detail\\Detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\vue-cli_study\\VueMail\\mail\\src\\views\\detail\\Detail.vue","mtime":1600089253683},{"path":"E:\\vue-cli_study\\VueMail\\mail\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue-cli_study\\VueMail\\mail\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\vue-cli_study\\VueMail\\mail\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue-cli_study\\VueMail\\mail\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBEZXRhaWxOYXZCYXIgZnJvbSAnLi9jaGlsZENvbXBzL0RldGFpbE5hdkJhcicKaW1wb3J0IERldGFpbFN3aXBlciBmcm9tICcuL2NoaWxkQ29tcHMvRGV0YWlsU3dpcGVyJwppbXBvcnQgRGV0YWlsQmFzZUluZm8gZnJvbSAnLi9jaGlsZENvbXBzL0RldGFpbEJhc2VJbmZvJwppbXBvcnQgRGV0YWlsU2hvcEluZm8gZnJvbSAnLi9jaGlsZENvbXBzL0RldGFpbFNob3BJbmZvJwppbXBvcnQgRGV0YWlsR29vZHNJbmZvIGZyb20gJy4vY2hpbGRDb21wcy9EZXRhaWxHb29kc0luZm8nCmltcG9ydCBEZXRhaWxQYXJhbUluZm8gZnJvbSAnLi9jaGlsZENvbXBzL0RldGFpbFBhcmFtSW5mbycKaW1wb3J0IERldGFpbENvbW1lbnRJbmZvIGZyb20gIi4vY2hpbGRDb21wcy9EZXRhaWxDb21tZW50SW5mbyI7CmltcG9ydCBHb29kc0xpc3QgZnJvbSAiQC9jb21wb25lbnRzL2NvbnRlbnQvZ29vZHMvR29vZHNMaXN0IjsKCmltcG9ydCBTY3JvbGwgZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9zY3JvbGwvU2Nyb2xsJwoKaW1wb3J0IHtnZXREZXRhaWwsIEdvb2RzLCBTaG9wLCBHb29kc1BhcmFtLCBnZXRSZWNvbW1lbmR9IGZyb20gIi4uLy4uL25ldHdvcmsvZGV0YWlsIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRGV0YWlsIiwKICBjb21wb25lbnRzOiB7CiAgICBEZXRhaWxOYXZCYXIsCiAgICBEZXRhaWxTd2lwZXIsCiAgICBEZXRhaWxCYXNlSW5mbywKICAgIERldGFpbFNob3BJbmZvLAogICAgRGV0YWlsR29vZHNJbmZvLAogICAgRGV0YWlsUGFyYW1JbmZvLAogICAgU2Nyb2xsLAogICAgR29vZHNMaXN0LAogICAgRGV0YWlsQ29tbWVudEluZm8KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpaWQ6IG51bGwsCiAgICAgIHRvcEltYWdlczogW10sCiAgICAgIGdvb2RzOiB7fSwKICAgICAgc2hvcDoge30sCiAgICAgIGRldGFpbEluZm86IHt9LAogICAgICBwYXJhbUluZm86IHt9LAogICAgICBjb21tZW50SW5mbzp7fSwKICAgICAgcmVjb21tZW5kczpbXSwKICAgICAgdGhlbWVUb3BZczpbXSwKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICAvLyAxLuS/neWtmOS8oOWFpeeahGlpZAogICAgdGhpcy5paWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWlkCgogICAgLy8gMi7moLnmja5paWTor7fmsYLor6bmg4XmlbDmja4KICAgIGdldERldGFpbCh0aGlzLmlpZCkudGhlbihyZXMgPT4gewogICAgICAvLyAxLuiOt+WPlumhtumDqOeahOWbvueJh+i9ruaSreaVsOaNrgogICAgICBjb25zdCBkYXRhID0gcmVzLnJlc3VsdDsKICAgICAgdGhpcy50b3BJbWFnZXMgPSBkYXRhLml0ZW1JbmZvLnRvcEltYWdlcwoKICAgICAgLy8gMi7ojrflj5bllYblk4Hkv6Hmga8KICAgICAgdGhpcy5nb29kcyA9IG5ldyBHb29kcyhkYXRhLml0ZW1JbmZvLCBkYXRhLmNvbHVtbnMsIGRhdGEuc2hvcEluZm8uc2VydmljZXMpCgogICAgICAvLyAzLuWIm+W7uuW6l+mTuuS/oeaBr+eahOWvueixoQogICAgICB0aGlzLnNob3AgPSBuZXcgU2hvcChkYXRhLnNob3BJbmZvKQoKICAgICAgLy8gNC7kv53lrZjllYblk4HnmoTor6bmg4XmlbDmja4KICAgICAgdGhpcy5kZXRhaWxJbmZvID0gZGF0YS5kZXRhaWxJbmZvOwoKICAgICAgLy8gNS7ojrflj5blj4LmlbDnmoTkv6Hmga8KICAgICAgdGhpcy5wYXJhbUluZm8gPSBuZXcgR29vZHNQYXJhbShkYXRhLml0ZW1QYXJhbXMuaW5mbywgZGF0YS5pdGVtUGFyYW1zLnJ1bGUpCgogICAgICAvLyDlj5blh7ror4Torrrkv6Hmga8KICAgICAgaWYgKGRhdGEucmF0ZS5jUmF0ZSAhPT0gMCl7CiAgICAgICAgdGhpcy5jb21tZW50SW5mbyA9IGRhdGEucmF0ZS5saXN0WzBdCiAgICAgIH0KICAgIH0pCgogICAgLy8zLuivt+axguaOqOiNkOaVsOaNrgogICAgZ2V0UmVjb21tZW5kKCkudGhlbihyZXMgPT4gewogICAgICB0aGlzLnJlY29tbWVuZHMgPSByZXMuZGF0YS5saXN0CiAgICB9KQogIH0sCiAgdXBkYXRlZCgpIHsKCiAgfSwKICBtZXRob2RzOiB7CiAgICBpbWFnZUxvYWQoKSB7CiAgICAgIHRoaXMuJHJlZnMuc2Nyb2xsLnJlZnJlc2goKQogICAgICB0aGlzLnRoZW1lVG9wWXMgPSBbXQogICAgICB0aGlzLnRoZW1lVG9wWXMucHVzaCgwKQogICAgICB0aGlzLnRoZW1lVG9wWXMucHVzaCh0aGlzLiRyZWZzLnBhcmFtcy4kZWwub2Zmc2V0VG9wKQogICAgICB0aGlzLnRoZW1lVG9wWXMucHVzaCh0aGlzLiRyZWZzLmNvbW1lbnQuJGVsLm9mZnNldFRvcCkKICAgICAgdGhpcy50aGVtZVRvcFlzLnB1c2godGhpcy4kcmVmcy5yZWNvbW1lbmQuJGVsLm9mZnNldFRvcCkKICAgICAgY29uc29sZS5sb2codGhpcy50aGVtZVRvcFlzKTsKICAgIH0sCiAgICB0aXRsZUNsaWNrKGluZGV4KXsKICAgICAgLy8gY29uc29sZS5sb2coaW5kZXgpOwogICAgICB0aGlzLiRyZWZzLnNjcm9sbC5zY3JvbGxUbygwLCAtdGhpcy50aGVtZVRvcFlzW2luZGV4XSkKICAgIH0sCiAgfQp9Cg=="},{"version":3,"sources":["Detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Detail.vue","sourceRoot":"src/views/detail","sourcesContent":["<template>\n  <div id=\"detail\">\n    <detail-nav-bar class=\"detail-nav\" @titleClick=\"titleClick\"/>\n    <scroll class=\"content\" ref=\"scroll\">\n      <detail-swiper :top-images=\"topImages\"/>\n      <detail-base-info :goods=\"goods\"/>\n      <detail-shop-info :shop=\"shop\"/>\n      <detail-goods-info :detail-info=\"detailInfo\" @imageLoad=\"imageLoad\"/>\n      <detail-param-info ref=\"params\" :param-info=\"paramInfo\"/>\n      <detail-comment-info ref=\"comment\" :comment-info=\"commentInfo\"> </detail-comment-info>\n      <goods-list ref=\"recommend\" :goods=\"recommends\"> </goods-list>\n    </scroll>\n  </div>\n</template>\n\n<script>\n  import DetailNavBar from './childComps/DetailNavBar'\n  import DetailSwiper from './childComps/DetailSwiper'\n  import DetailBaseInfo from './childComps/DetailBaseInfo'\n  import DetailShopInfo from './childComps/DetailShopInfo'\n  import DetailGoodsInfo from './childComps/DetailGoodsInfo'\n  import DetailParamInfo from './childComps/DetailParamInfo'\n  import DetailCommentInfo from \"./childComps/DetailCommentInfo\";\n  import GoodsList from \"@/components/content/goods/GoodsList\";\n\n  import Scroll from '@/components/common/scroll/Scroll'\n\n  import {getDetail, Goods, Shop, GoodsParam, getRecommend} from \"../../network/detail\";\n\n  export default {\n    name: \"Detail\",\n    components: {\n      DetailNavBar,\n      DetailSwiper,\n      DetailBaseInfo,\n      DetailShopInfo,\n      DetailGoodsInfo,\n      DetailParamInfo,\n      Scroll,\n      GoodsList,\n      DetailCommentInfo\n    },\n    data() {\n      return {\n        iid: null,\n        topImages: [],\n        goods: {},\n        shop: {},\n        detailInfo: {},\n        paramInfo: {},\n        commentInfo:{},\n        recommends:[],\n        themeTopYs:[],\n      }\n    },\n    created() {\n      // 1.保存传入的iid\n      this.iid = this.$route.params.iid\n\n      // 2.根据iid请求详情数据\n      getDetail(this.iid).then(res => {\n        // 1.获取顶部的图片轮播数据\n        const data = res.result;\n        this.topImages = data.itemInfo.topImages\n\n        // 2.获取商品信息\n        this.goods = new Goods(data.itemInfo, data.columns, data.shopInfo.services)\n\n        // 3.创建店铺信息的对象\n        this.shop = new Shop(data.shopInfo)\n\n        // 4.保存商品的详情数据\n        this.detailInfo = data.detailInfo;\n\n        // 5.获取参数的信息\n        this.paramInfo = new GoodsParam(data.itemParams.info, data.itemParams.rule)\n\n        // 取出评论信息\n        if (data.rate.cRate !== 0){\n          this.commentInfo = data.rate.list[0]\n        }\n      })\n\n      //3.请求推荐数据\n      getRecommend().then(res => {\n        this.recommends = res.data.list\n      })\n    },\n    updated() {\n\n    },\n    methods: {\n      imageLoad() {\n        this.$refs.scroll.refresh()\n        this.themeTopYs = []\n        this.themeTopYs.push(0)\n        this.themeTopYs.push(this.$refs.params.$el.offsetTop)\n        this.themeTopYs.push(this.$refs.comment.$el.offsetTop)\n        this.themeTopYs.push(this.$refs.recommend.$el.offsetTop)\n        console.log(this.themeTopYs);\n      },\n      titleClick(index){\n        // console.log(index);\n        this.$refs.scroll.scrollTo(0, -this.themeTopYs[index])\n      },\n    }\n  }\n</script>\n\n<style scoped>\n  #detail {\n    position: relative;\n    z-index: 9;\n    background-color: #fff;\n    height: 100vh;\n  }\n\n  .detail-nav {\n    position: relative;\n    z-index: 9;\n    background-color: #fff;\n  }\n\n  .content {\n    height: calc(100% - 44px);\n  }\n</style>\n"]}]}