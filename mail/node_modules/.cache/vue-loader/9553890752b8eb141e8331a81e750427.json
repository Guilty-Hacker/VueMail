{"remainingRequest":"E:\\vue-cli_study\\VueMail\\mail\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\vue-cli_study\\VueMail\\mail\\src\\views\\detail\\Detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\vue-cli_study\\VueMail\\mail\\src\\views\\detail\\Detail.vue","mtime":1600328497686},{"path":"E:\\vue-cli_study\\VueMail\\mail\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue-cli_study\\VueMail\\mail\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\vue-cli_study\\VueMail\\mail\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue-cli_study\\VueMail\\mail\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBEZXRhaWxOYXZCYXIgZnJvbSAnLi9jaGlsZENvbXBzL0RldGFpbE5hdkJhcicKaW1wb3J0IERldGFpbFN3aXBlciBmcm9tICcuL2NoaWxkQ29tcHMvRGV0YWlsU3dpcGVyJwppbXBvcnQgRGV0YWlsQmFzZUluZm8gZnJvbSAnLi9jaGlsZENvbXBzL0RldGFpbEJhc2VJbmZvJwppbXBvcnQgRGV0YWlsU2hvcEluZm8gZnJvbSAnLi9jaGlsZENvbXBzL0RldGFpbFNob3BJbmZvJwppbXBvcnQgRGV0YWlsR29vZHNJbmZvIGZyb20gJy4vY2hpbGRDb21wcy9EZXRhaWxHb29kc0luZm8nCmltcG9ydCBEZXRhaWxQYXJhbUluZm8gZnJvbSAnLi9jaGlsZENvbXBzL0RldGFpbFBhcmFtSW5mbycKaW1wb3J0IERldGFpbENvbW1lbnRJbmZvIGZyb20gIi4vY2hpbGRDb21wcy9EZXRhaWxDb21tZW50SW5mbyI7CmltcG9ydCBHb29kc0xpc3QgZnJvbSAiQC9jb21wb25lbnRzL2NvbnRlbnQvZ29vZHMvR29vZHNMaXN0IjsKaW1wb3J0IERldGFpbEJvdHRvbUJhciBmcm9tICIuL2NoaWxkQ29tcHMvRGV0YWlsQm90dG9tQmFyIjsKaW1wb3J0IFNjcm9sbCBmcm9tICdAL2NvbXBvbmVudHMvY29tbW9uL3Njcm9sbC9TY3JvbGwnCgppbXBvcnQge2dldERldGFpbCwgR29vZHMsIFNob3AsIEdvb2RzUGFyYW0sIGdldFJlY29tbWVuZH0gZnJvbSAiLi4vLi4vbmV0d29yay9kZXRhaWwiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJEZXRhaWwiLAogIGNvbXBvbmVudHM6IHsKICAgIERldGFpbE5hdkJhciwKICAgIERldGFpbFN3aXBlciwKICAgIERldGFpbEJhc2VJbmZvLAogICAgRGV0YWlsU2hvcEluZm8sCiAgICBEZXRhaWxHb29kc0luZm8sCiAgICBEZXRhaWxQYXJhbUluZm8sCiAgICBTY3JvbGwsCiAgICBEZXRhaWxCb3R0b21CYXIsCiAgICBHb29kc0xpc3QsCiAgICBEZXRhaWxDb21tZW50SW5mbwogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlpZDogbnVsbCwKICAgICAgdG9wSW1hZ2VzOiBbXSwKICAgICAgZ29vZHM6IHt9LAogICAgICBzaG9wOiB7fSwKICAgICAgZGV0YWlsSW5mbzoge30sCiAgICAgIHBhcmFtSW5mbzoge30sCiAgICAgIGNvbW1lbnRJbmZvOnt9LAogICAgICByZWNvbW1lbmRzOltdLAogICAgICB0aGVtZVRvcFlzOltdLAogICAgICBjdXJyZW50SW5kZXg6IDAsCgogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIC8vIDEu5L+d5a2Y5Lyg5YWl55qEaWlkCiAgICB0aGlzLmlpZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5paWQKCiAgICAvLyAyLuagueaNrmlpZOivt+axguivpuaDheaVsOaNrgogICAgZ2V0RGV0YWlsKHRoaXMuaWlkKS50aGVuKHJlcyA9PiB7CiAgICAgIC8vIDEu6I635Y+W6aG26YOo55qE5Zu+54mH6L2u5pKt5pWw5o2uCiAgICAgIGNvbnN0IGRhdGEgPSByZXMucmVzdWx0OwogICAgICB0aGlzLnRvcEltYWdlcyA9IGRhdGEuaXRlbUluZm8udG9wSW1hZ2VzCgogICAgICAvLyAyLuiOt+WPluWVhuWTgeS/oeaBrwogICAgICB0aGlzLmdvb2RzID0gbmV3IEdvb2RzKGRhdGEuaXRlbUluZm8sIGRhdGEuY29sdW1ucywgZGF0YS5zaG9wSW5mby5zZXJ2aWNlcykKCiAgICAgIC8vIDMu5Yib5bu65bqX6ZO65L+h5oGv55qE5a+56LGhCiAgICAgIHRoaXMuc2hvcCA9IG5ldyBTaG9wKGRhdGEuc2hvcEluZm8pCgogICAgICAvLyA0LuS/neWtmOWVhuWTgeeahOivpuaDheaVsOaNrgogICAgICB0aGlzLmRldGFpbEluZm8gPSBkYXRhLmRldGFpbEluZm87CgogICAgICAvLyA1LuiOt+WPluWPguaVsOeahOS/oeaBrwogICAgICB0aGlzLnBhcmFtSW5mbyA9IG5ldyBHb29kc1BhcmFtKGRhdGEuaXRlbVBhcmFtcy5pbmZvLCBkYXRhLml0ZW1QYXJhbXMucnVsZSkKCiAgICAgIC8vIOWPluWHuuivhOiuuuS/oeaBrwogICAgICBpZiAoZGF0YS5yYXRlLmNSYXRlICE9PSAwKXsKICAgICAgICB0aGlzLmNvbW1lbnRJbmZvID0gZGF0YS5yYXRlLmxpc3RbMF0KICAgICAgfQogICAgfSkKCiAgICAvLzMu6K+35rGC5o6o6I2Q5pWw5o2uCiAgICBnZXRSZWNvbW1lbmQoKS50aGVuKHJlcyA9PiB7CiAgICAgIHRoaXMucmVjb21tZW5kcyA9IHJlcy5kYXRhLmxpc3QKICAgIH0pCiAgfSwKICBtZXRob2RzOiB7CiAgICBpbWFnZUxvYWQoKSB7CiAgICAgIHRoaXMuJHJlZnMuc2Nyb2xsLnJlZnJlc2goKQogICAgICB0aGlzLnRoZW1lVG9wWXMgPSBbXQogICAgICB0aGlzLnRoZW1lVG9wWXMucHVzaCgwKQogICAgICB0aGlzLnRoZW1lVG9wWXMucHVzaCh0aGlzLiRyZWZzLnBhcmFtcy4kZWwub2Zmc2V0VG9wKQogICAgICB0aGlzLnRoZW1lVG9wWXMucHVzaCh0aGlzLiRyZWZzLmNvbW1lbnQuJGVsLm9mZnNldFRvcCkKICAgICAgdGhpcy50aGVtZVRvcFlzLnB1c2godGhpcy4kcmVmcy5yZWNvbW1lbmQuJGVsLm9mZnNldFRvcCkKICAgICAgY29uc29sZS5sb2codGhpcy50aGVtZVRvcFlzKTsKICAgIH0sCiAgICB0aXRsZUNsaWNrKGluZGV4KXsKICAgICAgLy8gY29uc29sZS5sb2coaW5kZXgpOwogICAgICB0aGlzLiRyZWZzLnNjcm9sbC5zY3JvbGxUbygwLCAtdGhpcy50aGVtZVRvcFlzW2luZGV4XSkKICAgIH0sCiAgICBjb250ZW50U2Nyb2xsKHBvc2l0aW9uKXsKICAgICAgY29uc3QgcG9zaXRpb25ZID0gLXBvc2l0aW9uLnkKICAgICAgLy8gY29uc29sZS5sb2cocG9zdGlvbik7CiAgICAgIGxldCBsZW5ndGggPSB0aGlzLnRoZW1lVG9wWXMubGVuZ3RoCiAgICAgIGZvcihsZXQgaT0wOyBpPGxlbmd0aDtpKyspewogICAgICBpZiAodGhpcy5jdXJyZW50SW5kZXggIT09IGkgJiYoKGkgPCBsZW5ndGggLSAxICYmIHBvc2l0aW9uWSA+PSB0aGlzLnRoZW1lVG9wWXNbaV0gJiYgcG9zaXRpb25ZIDwKICAgICAgICAgIHRoaXMudGhlbWVUb3BZc1tpKzFdKSB8fCAoaT09PWxlbmd0aC0xICYmIHBvc2l0aW9uWSA+PSB0aGlzLnRoZW1lVG9wWXNbaV0pKSl7CiAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCA9IGk7CiAgICAgICAgICB0aGlzLiRyZWZzLm5hdi5jdXJyZW50SW5kZXggPSB0aGlzLmN1cnJlbnRJbmRleAogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGFkZFRvQ2FydCgpewogICAgICAvLzEu6I635Y+W5ZWG5ZOB5L+h5oGvCiAgICAgIGNvbnN0IHByb2R1Y3QgPSB7fQogICAgICBwcm9kdWN0LmltYWdlID0gdGhpcy50b3BJbWFnZXNbMF0KICAgICAgcHJvZHVjdC50aXRsZSA9IHRoaXMuZ29vZHMudGl0bGUKICAgICAgcHJvZHVjdC5kZXNjID0gdGhpcy5nb29kcy5kZXNjCiAgICAgIHByb2R1Y3QucHJpY2UgPSB0aGlzLmdvb2RzLnJlYWxQcmljZQogICAgICBwcm9kdWN0LmlpZCA9IHRoaXMuaWlkCiAgICAgIC8vMi7lsIbllYblk4Hmt7vliqDliLDotK3nianovaYKICAgICAgLy8gdGhpcy4kc3RvcmUuY29tbWl0KCdhZGRDYXJ0JywgcHJvZHVjdCkKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2FkZENhcnQnLHByb2R1Y3QpCiAgICB9LAogIH0KfQo="},{"version":3,"sources":["Detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Detail.vue","sourceRoot":"src/views/detail","sourcesContent":["<template>\n  <div id=\"detail\">\n    <detail-nav-bar class=\"detail-nav\" @titleClick=\"titleClick\" ref=\"nav\"/>\n    <scroll class=\"content\" ref=\"scroll\" :probe-type=\"3\" @scroll=\"contentScroll\">\n      <detail-swiper :top-images=\"topImages\"/>\n      <detail-base-info :goods=\"goods\"/>\n      <detail-shop-info :shop=\"shop\"/>\n      <detail-goods-info :detail-info=\"detailInfo\" @imageLoad=\"imageLoad\"/>\n      <detail-param-info ref=\"params\" :param-info=\"paramInfo\"/>\n      <detail-comment-info ref=\"comment\" :comment-info=\"commentInfo\"> </detail-comment-info>\n      <goods-list ref=\"recommend\" :goods=\"recommends\"> </goods-list>\n    </scroll>\n    <detail-bottom-bar @addCart=\"addToCart\"> </detail-bottom-bar>\n  </div>\n</template>\n\n<script>\n  import DetailNavBar from './childComps/DetailNavBar'\n  import DetailSwiper from './childComps/DetailSwiper'\n  import DetailBaseInfo from './childComps/DetailBaseInfo'\n  import DetailShopInfo from './childComps/DetailShopInfo'\n  import DetailGoodsInfo from './childComps/DetailGoodsInfo'\n  import DetailParamInfo from './childComps/DetailParamInfo'\n  import DetailCommentInfo from \"./childComps/DetailCommentInfo\";\n  import GoodsList from \"@/components/content/goods/GoodsList\";\n  import DetailBottomBar from \"./childComps/DetailBottomBar\";\n  import Scroll from '@/components/common/scroll/Scroll'\n\n  import {getDetail, Goods, Shop, GoodsParam, getRecommend} from \"../../network/detail\";\n\n  export default {\n    name: \"Detail\",\n    components: {\n      DetailNavBar,\n      DetailSwiper,\n      DetailBaseInfo,\n      DetailShopInfo,\n      DetailGoodsInfo,\n      DetailParamInfo,\n      Scroll,\n      DetailBottomBar,\n      GoodsList,\n      DetailCommentInfo\n    },\n    data() {\n      return {\n        iid: null,\n        topImages: [],\n        goods: {},\n        shop: {},\n        detailInfo: {},\n        paramInfo: {},\n        commentInfo:{},\n        recommends:[],\n        themeTopYs:[],\n        currentIndex: 0,\n\n      }\n    },\n    created() {\n      // 1.保存传入的iid\n      this.iid = this.$route.params.iid\n\n      // 2.根据iid请求详情数据\n      getDetail(this.iid).then(res => {\n        // 1.获取顶部的图片轮播数据\n        const data = res.result;\n        this.topImages = data.itemInfo.topImages\n\n        // 2.获取商品信息\n        this.goods = new Goods(data.itemInfo, data.columns, data.shopInfo.services)\n\n        // 3.创建店铺信息的对象\n        this.shop = new Shop(data.shopInfo)\n\n        // 4.保存商品的详情数据\n        this.detailInfo = data.detailInfo;\n\n        // 5.获取参数的信息\n        this.paramInfo = new GoodsParam(data.itemParams.info, data.itemParams.rule)\n\n        // 取出评论信息\n        if (data.rate.cRate !== 0){\n          this.commentInfo = data.rate.list[0]\n        }\n      })\n\n      //3.请求推荐数据\n      getRecommend().then(res => {\n        this.recommends = res.data.list\n      })\n    },\n    methods: {\n      imageLoad() {\n        this.$refs.scroll.refresh()\n        this.themeTopYs = []\n        this.themeTopYs.push(0)\n        this.themeTopYs.push(this.$refs.params.$el.offsetTop)\n        this.themeTopYs.push(this.$refs.comment.$el.offsetTop)\n        this.themeTopYs.push(this.$refs.recommend.$el.offsetTop)\n        console.log(this.themeTopYs);\n      },\n      titleClick(index){\n        // console.log(index);\n        this.$refs.scroll.scrollTo(0, -this.themeTopYs[index])\n      },\n      contentScroll(position){\n        const positionY = -position.y\n        // console.log(postion);\n        let length = this.themeTopYs.length\n        for(let i=0; i<length;i++){\n        if (this.currentIndex !== i &&((i < length - 1 && positionY >= this.themeTopYs[i] && positionY <\n            this.themeTopYs[i+1]) || (i===length-1 && positionY >= this.themeTopYs[i]))){\n            this.currentIndex = i;\n            this.$refs.nav.currentIndex = this.currentIndex\n          }\n        }\n      },\n      addToCart(){\n        //1.获取商品信息\n        const product = {}\n        product.image = this.topImages[0]\n        product.title = this.goods.title\n        product.desc = this.goods.desc\n        product.price = this.goods.realPrice\n        product.iid = this.iid\n        //2.将商品添加到购物车\n        // this.$store.commit('addCart', product)\n        this.$store.dispatch('addCart',product)\n      },\n    }\n  }\n</script>\n\n<style scoped>\n  #detail {\n    position: relative;\n    z-index: 9;\n    background-color: #fff;\n    height: 100vh;\n  }\n\n  .detail-nav {\n    position: relative;\n    z-index: 9;\n    background-color: #fff;\n  }\n\n  .content {\n    height: calc(100% - 44px);\n  }\n</style>\n"]}]}